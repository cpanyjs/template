import{o as e,c as l,a as n,i as a,u as t,j as r,d as s,k as o,l as i,r as u,b as c,w as d,g as p,m as v,F as f,n as g,t as m,e as b,h as w,p as h,q as y}from"./index.af68f3a4.js";const x={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},k=[n("path",{d:"M11 4h2v12l5.5-5.5l1.42 1.42L12 19.84l-7.92-7.92L5.5 10.5L11 16V4z",fill:"currentColor"},null,-1)];var C={name:"mdi-arrow-down",render:function(n,a){return e(),l("svg",x,k)}};const P={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},M=[n("path",{d:"M13 20h-2V8l-5.5 5.5l-1.42-1.42L12 4.16l7.92 7.92l-1.42 1.42L13 8v12z",fill:"currentColor"},null,-1)];var L={name:"mdi-arrow-up",render:function(n,a){return e(),l("svg",P,M)}};var S=s({name:"CTableColumn",props:{label:String,width:{type:[Number,String]},align:String,center:{type:Boolean,default:!1},sort:Function,mobileHeaderClass:{type:Array,default:[]}},setup(e,{slots:l}){const{align:n,center:a}=o(e),t=["px-3","py-2","center"===n.value||a.value?"text-center":"right"===n.value?"text-right":"text-left"];return()=>i("td",{class:t},l.default&&l.default(e))}});const j={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},_=[n("path",{d:"M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.42z",fill:"currentColor"},null,-1)];var z={name:"mdi-chevron-left",render:function(n,a){return e(),l("svg",j,_)}};const q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},A=[n("path",{d:"M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.42z",fill:"currentColor"},null,-1)];var N={name:"mdi-chevron-right",render:function(n,a){return e(),l("svg",q,A)}};const B={key:0,class:"mb-2 grid grid-cols-2 gap-2"},R={class:"flex justify-center"},F=n("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),V=n("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Y=n("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),T=n("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1);var W=s({props:{isMobile:{type:Boolean,required:!1},pageView:{type:Number,required:!1},current:{type:Number,required:!0},first:{type:Number,required:!0},last:{type:Number,required:!0},pageSize:{type:Number,required:!0},nextPage:{type:Function,required:!0},prePage:{type:Function,required:!0},goPage:{type:Function,required:!0}},setup(a){const s=a,{isMobile:i,pageView:w,current:h,first:y,last:x}=o(s),k=r((()=>{var e;return null!=(e=null==w?void 0:w.value)?e:5})),C=r((()=>{var e;return null!=(e=null==i?void 0:i.value)&&e}));return(r,s)=>{const o=u("c-button");return e(),l(f,null,[t(C)?(e(),l("div",B,[c(o,{padding:"p-2",onClick:a.prePage,disable:t(h)<=t(y)},{default:d((()=>[c(t(z))])),_:1},8,["onClick","disable"]),c(o,{padding:"p-2",onClick:a.nextPage,disable:t(h)+1>=t(x)},{default:d((()=>[c(t(N))])),_:1},8,["onClick","disable"])])):p("v-if",!0),n("div",R,[t(C)?p("v-if",!0):(e(),v(o,{key:0,padding:"p-2",onClick:a.prePage,disable:t(h)<=t(y)},{default:d((()=>[c(t(z))])),_:1},8,["onClick","disable"])),t(x)-t(y)<=t(k)?(e(!0),l(f,{key:1},g(t(x)-t(y),(l=>(e(),v(o,{key:l,class:"ml-2",info:l+t(y)===t(h)+1,onClick:e=>a.goPage(l+t(y)-1)},{default:d((()=>[n("span",null,m(l+t(y)),1)])),_:2},1032,["info","onClick"])))),128)):t(h)-t(y)<t(k)?(e(),l(f,{key:2},[(e(!0),l(f,null,g(t(k),(l=>(e(),v(o,{key:l,class:"ml-2",info:l+t(y)===t(h)+1,onClick:e=>a.goPage(l+t(y)-1)},{default:d((()=>[n("span",null,m(l+t(y)),1)])),_:2},1032,["info","onClick"])))),128)),F,c(o,{class:"ml-2",onClick:s[0]||(s[0]=e=>a.goPage(t(x)-1))},{default:d((()=>[b(m(t(x)),1)])),_:1})],64)):t(x)-t(h)<=t(k)?(e(),l(f,{key:3},[c(o,{class:"ml-2",onClick:s[1]||(s[1]=e=>a.goPage(t(y)))},{default:d((()=>[b(m(t(y)+1),1)])),_:1}),V,(e(!0),l(f,null,g(t(k),(l=>(e(),v(o,{key:l,class:"ml-2",info:t(x)-t(k)+l===t(h)+1,onClick:e=>a.goPage(t(x)-t(k)+l-1)},{default:d((()=>[n("span",null,m(t(x)-t(k)+l),1)])),_:2},1032,["info","onClick"])))),128))],64)):(e(),l(f,{key:4},[c(o,{class:"ml-2",onClick:s[2]||(s[2]=e=>a.goPage(t(y)))},{default:d((()=>[b(m(t(y)+1),1)])),_:1}),Y,(e(!0),l(f,null,g(t(k),(l=>(e(),v(o,{key:l,class:"ml-2",info:t(h)-Math.floor(t(k)/2)+l===t(h)+1,onClick:e=>a.goPage(t(h)-Math.floor(t(k)/2)+l-1)},{default:d((()=>[n("span",null,m(t(h)-Math.floor(t(k)/2)+l),1)])),_:2},1032,["info","onClick"])))),128)),T,c(o,{class:"ml-2",onClick:s[3]||(s[3]=e=>a.goPage(t(x)-1))},{default:d((()=>[b(m(t(x)),1)])),_:1})],64)),t(C)?p("v-if",!0):(e(),v(o,{key:5,padding:"p-2",class:"ml-2",onClick:a.nextPage,disable:t(h)+1>=t(x)},{default:d((()=>[c(t(N))])),_:1},8,["onClick","disable"]))])],64)}}});const E={},I={class:"select relative"},O={class:"pl-2 pr-8 py-2 cursor-pointer block w-full outline-none rounded border border-1 border-[#dbdbdb] appearance-none"};E.render=function(a,t){return e(),l("div",I,[n("select",O,[w(a.$slots,"default")])])};var D=s({name:"CTable",components:{IconDown:C,IconUp:L,CTablePage:W,CSelect:E},props:{data:{type:Array,default:[]},mobile:{type:Number,default:768},defaultSort:{type:String},defaultSortOrder:{type:String,default:"asc"},pageSize:{type:Number},mobilePageSize:{type:Number}},setup(e,{slots:l}){const{data:n,defaultSort:s,defaultSortOrder:c,mobile:d,pageSize:p,mobilePageSize:v}=o(e),{isMobile:g,clean:m}=function(e){const l=a(window.innerWidth),n=a(l.value<=t(e)),r=()=>{l.value=window.innerWidth,n.value=l.value<=t(e)};return window.addEventListener("resize",r,{passive:!0}),{width:l,isMobile:n,clean:()=>window.removeEventListener("resize",r)}}(d);h((()=>m()));const b=r((()=>{var e;return g.value&&null!=(e=v.value)?e:p.value})),w=r((()=>y(b.value))),{current:x,pageLength:k,L:C,R:P,nextPage:M,prePage:L,goPage:j}=function(e,l){const n=r((()=>t(l).length)),s=r((()=>{var l;return Math.max(1,null!=(l=t(e))?l:n.value)})),o=r((()=>Math.ceil(n.value/s.value))),i=a(0),u=r((()=>i.value*s.value)),c=r((()=>Math.min(n.value,u.value+s.value))),d=r((()=>i.value+1<o.value&&c.value<n.value)),p=r((()=>i.value>0&&u.value>0));return{current:i,pageLength:o,L:u,R:c,hasNextPage:d,nextPage:()=>{d.value&&(i.value+=1)},hasPrePage:p,prePage:()=>{p.value&&(i.value-=1)},goPage:e=>{const l=t(e);0<=l&&l<o.value&&(i.value=l)}}}(b,n),_=a(s.value),z=a(c.value),q=e=>{_.value=e,z.value=c.value},A=()=>{"desc"===z.value?z.value="asc":z.value="desc"},N=e=>{if(!e)return[];const l=[];for(const n of e)if(n.type===f&&Array.isArray(n.children))for(const e of n.children)null===e||"object"!=typeof e||Array.isArray(e)||l.push(e);else l.push(n);return l.filter((e=>e.type===S))},B=N(l.columns?l.columns({}):[]),R=r((()=>(e=>{var l,n,a;if(y(_.value)){for(const t of B){if((null!=(n=null==(l=t.props)?void 0:l.label)?n:"")===_.value){const l=e.sort(null==(a=t.props)?void 0:a.sort);return"desc"===z.value?l.reverse():l}}return e}return e})(n.value))),F=r((()=>R.value.slice(C.value,P.value))),V=()=>i(u("c-table-page"),{current:x.value,first:0,last:k.value,pageSize:b.value,nextPage:M,prePage:L,goPage:j,pageView:g.value?3:5,isMobile:g.value});return()=>{return g.value?i("div",{class:["mobile-table"]},[(()=>{const e=B.map((e=>{var l,n,a;if(y(null==(l=e.props)?void 0:l.sort)){const l=null!=(a=null==(n=e.props)?void 0:n.label)?a:"";return i("option",{value:l},[l])}return null})).filter((e=>y(e)));return e.length>0&&i("div",{class:["my-4","flex","justify-between"]},[i(u("c-select"),{class:["w-full","mr-2"],onChange(e){var l;const n=null==(l=e.target)?void 0:l.value;y(n)&&q(n)}},e),i(u("c-button"),{info:!0,onClick:A},["desc"===z.value?i(u("icon-down"),{}):i(u("icon-up"),{})])])})(),F.value.map(((e,n)=>{const a=N(l.columns&&l.columns({row:e,index:n+C.value,mobile:!0}));return i("div",{class:["box","p-0","my-4"]},a.map((e=>{var l,n;const a=null!=(l=e.props&&e.props["mobile-header-class"])?l:[];return i("div",{class:["pl-3","border","flex","flex-shrink","justify-between","justify-items-stretch"]},[i("div",{class:["py-2","font-600","text-left","flex","items-center",...a]},null==(n=e.props)?void 0:n.label),i(e,{class:["block"]})])})))})),w.value&&V()]):i("div",{},[i("table",{class:["table","w-full","border-separate","table-auto","rounded"]},[i("thead",{},i("tr",{},B.map((e=>{var l,n,a,t,r,s,o,c,d;const p=y(null==(l=e.props)?void 0:l.sort),v=p&&(null!=(a=null==(n=e.props)?void 0:n.label)?a:"")===_.value,f={width:null==(t=e.props)?void 0:t.width,borderWidth:"0 0 2px 0"},g="center"===(null==(r=e.props)?void 0:r.align)||y(null==(s=e.props)?void 0:s.center)&&!1!==(null==(o=e.props)?void 0:o.center)?"justify-center":"right"===(null==(c=e.props)?void 0:c.align)?"justify-end":"justify-start";return i("th",{style:f,class:["select-none","font-600","px-3","py-2","border-solid",v?"border-[#7a7a7a]":"border-[#dbdbdb]",p?"cursor-pointer":null,p?"hover:border-[#7a7a7a]":null]},i("div",{class:["flex","items-center",g],onClick:p?()=>{var l,n;v?A():q(null!=(n=null==(l=e.props)?void 0:l.label)?n:"")}:void 0},[p?i("desc"===z.value?u("icon-down"):u("icon-up"),{class:[!v&&"text-transparent"]}):"",i("span",{},null==(d=e.props)?void 0:d.label)]))})))),i("tbody",{},(e=F.value,e.map(((e,n)=>i("tr",{},l.columns&&N(l.columns({row:e,index:n+C.value})))))))]),w.value&&V()]);var e}}});export{S as C,E as _,D as a};
