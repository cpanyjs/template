import{o as d,c as b,a as w,i as I,u as e,j as x,k as ke,d as q,l as G,m as i,r as z,b as S,w as k,e as J,n as R,F as L,p as O,t as N,f as Y,_ as Ce,h as _e,q as Pe,s as B}from"./index.10035600.js";const Me={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Se=w("path",{d:"M11 4h2v12l5.5-5.5l1.42 1.42L12 19.84l-7.92-7.92L5.5 10.5L11 16V4z",fill:"currentColor"},null,-1),$e=[Se];function Le(t,o){return d(),b("svg",Me,$e)}var je={name:"mdi-arrow-down",render:Le};const ze={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ne=w("path",{d:"M13 20h-2V8l-5.5 5.5l-1.42-1.42L12 4.16l7.92 7.92l-1.42 1.42L13 8v12z",fill:"currentColor"},null,-1),Ae=[Ne];function Be(t,o){return d(),b("svg",ze,Ae)}var Ve={name:"mdi-arrow-up",render:Be};function Re(t){const o=I(window.innerWidth),v=I(o.value<=e(t)),g=()=>{o.value=window.innerWidth,v.value=o.value<=e(t)},a=()=>window.removeEventListener("resize",g);return window.addEventListener("resize",g,{passive:!0}),{width:o,isMobile:v,clean:a}}const pe=new Map;function De(t,o,v){var H;const g=x(()=>e(o).length),a=x(()=>{var M;return Math.max(1,(M=e(t))!=null?M:g.value)}),u=x(()=>Math.ceil(g.value/a.value)),s=I(v&&(H=pe.get(v))!=null?H:0),p=x(()=>s.value*a.value),C=x(()=>Math.min(g.value,p.value+a.value));ke(s,M=>{v&&pe.set(v,M)});const _=x(()=>s.value+1<u.value&&C.value<g.value),h=()=>{_.value&&(s.value+=1)},c=x(()=>s.value>0&&p.value>0);return{current:s,pageLength:u,L:p,R:C,hasNextPage:_,nextPage:h,hasPrePage:c,prePage:()=>{c.value&&(s.value-=1)},goPage:M=>{const D=e(M);0<=D&&D<u.value&&(s.value=D)}}}var Te=q({name:"CTableColumn",props:{label:String,width:{type:[Number,String]},align:String,center:{type:Boolean,default:!1},sort:Function,mobileHeaderClass:{type:Array,default:[]}},setup(t,{slots:o}){const{align:v,center:g}=G(t),a=["px-3","py-2",v.value==="center"||g.value?"text-center":v.value==="right"?"text-right":"text-left"];return()=>i("td",{class:a},o.default&&o.default(t))}});const Fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ie=w("path",{d:"M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.42z",fill:"currentColor"},null,-1),He=[Ie];function Oe(t,o){return d(),b("svg",Fe,He)}var ve={name:"mdi-chevron-left",render:Oe};const Ye={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ee=w("path",{d:"M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.42z",fill:"currentColor"},null,-1),Ue=[Ee];function We(t,o){return d(),b("svg",Ye,Ue)}var fe={name:"mdi-chevron-right",render:We};const qe={key:0,class:"mb-2 grid grid-cols-2 gap-2"},Ge={class:"flex justify-center"},Je=w("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Ke=w("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Qe=w("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Xe=w("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Ze=q({props:{isMobile:null,pageView:null,current:null,first:null,last:null,pageSize:null,nextPage:null,prePage:null,goPage:null},setup(t){const o=t,{isMobile:v,pageView:g,current:a,first:u,last:s}=G(o),p=x(()=>{var _;return(_=g==null?void 0:g.value)!=null?_:5}),C=x(()=>{var _;return(_=v==null?void 0:v.value)!=null?_:!1});return(_,h)=>{const c=z("c-button");return d(),b(L,null,[e(C)?(d(),b("div",qe,[S(c,{padding:"p-2",onClick:t.prePage,disable:e(a)<=e(u)},{default:k(()=>[S(e(ve))]),_:1},8,["onClick","disable"]),S(c,{padding:"p-2",onClick:t.nextPage,disable:e(a)+1>=e(s)},{default:k(()=>[S(e(fe))]),_:1},8,["onClick","disable"])])):J("v-if",!0),w("div",Ge,[e(C)?J("v-if",!0):(d(),R(c,{key:0,padding:"p-2",onClick:t.prePage,disable:e(a)<=e(u)},{default:k(()=>[S(e(ve))]),_:1},8,["onClick","disable"])),e(s)-e(u)<=e(p)?(d(!0),b(L,{key:1},O(e(s)-e(u),n=>(d(),R(c,{key:n,class:"ml-2",info:n+e(u)===e(a)+1,onClick:V=>t.goPage(n+e(u)-1)},{default:k(()=>[w("span",null,N(n+e(u)),1)]),_:2},1032,["info","onClick"]))),128)):e(a)-e(u)<e(p)?(d(),b(L,{key:2},[(d(!0),b(L,null,O(e(p),n=>(d(),R(c,{key:n,class:"ml-2",info:n+e(u)===e(a)+1,onClick:V=>t.goPage(n+e(u)-1)},{default:k(()=>[w("span",null,N(n+e(u)),1)]),_:2},1032,["info","onClick"]))),128)),Je,S(c,{class:"ml-2",onClick:h[0]||(h[0]=n=>t.goPage(e(s)-1))},{default:k(()=>[Y(N(e(s)),1)]),_:1})],64)):e(s)-e(a)<=e(p)?(d(),b(L,{key:3},[S(c,{class:"ml-2",onClick:h[1]||(h[1]=n=>t.goPage(e(u)))},{default:k(()=>[Y(N(e(u)+1),1)]),_:1}),Ke,(d(!0),b(L,null,O(e(p),n=>(d(),R(c,{key:n,class:"ml-2",info:e(s)-e(p)+n===e(a)+1,onClick:V=>t.goPage(e(s)-e(p)+n-1)},{default:k(()=>[w("span",null,N(e(s)-e(p)+n),1)]),_:2},1032,["info","onClick"]))),128))],64)):(d(),b(L,{key:4},[S(c,{class:"ml-2",onClick:h[2]||(h[2]=n=>t.goPage(e(u)))},{default:k(()=>[Y(N(e(u)+1),1)]),_:1}),Qe,(d(!0),b(L,null,O(e(p),n=>(d(),R(c,{key:n,class:"ml-2",info:e(a)-Math.floor(e(p)/2)+n===e(a)+1,onClick:V=>t.goPage(e(a)-Math.floor(e(p)/2)+n-1)},{default:k(()=>[w("span",null,N(e(a)-Math.floor(e(p)/2)+n),1)]),_:2},1032,["info","onClick"]))),128)),Xe,S(c,{class:"ml-2",onClick:h[3]||(h[3]=n=>t.goPage(e(s)-1))},{default:k(()=>[Y(N(e(s)),1)]),_:1})],64)),e(C)?J("v-if",!0):(d(),R(c,{key:5,padding:"p-2",class:"ml-2",onClick:t.nextPage,disable:e(a)+1>=e(s)},{default:k(()=>[S(e(fe))]),_:1},8,["onClick","disable"]))])],64)}}}),et={},tt={class:"select relative"},nt={class:"pl-2 pr-8 py-2 cursor-pointer block w-full outline-none rounded border border-1 border-[#dbdbdb] appearance-none"};function lt(t,o){return d(),b("div",tt,[w("select",nt,[_e(t.$slots,"default")])])}var at=Ce(et,[["render",lt]]);const ge=new Map;var rt=q({name:"CTable",components:{IconDown:je,IconUp:Ve,CTablePage:Ze,CSelect:at},props:{cache:{type:String},data:{type:Array,default:[]},mobile:{type:Number,default:768},defaultSort:{type:String},defaultSortOrder:{type:String,default:"asc"},pageSize:{type:Number},mobilePageSize:{type:Number}},setup(t,{slots:o}){var ee,te;const{data:v,defaultSort:g,defaultSortOrder:a,mobile:u,pageSize:s,mobilePageSize:p}=G(t),{isMobile:C,clean:_}=Re(u);Pe(()=>_());const h=x(()=>{var y;return C.value&&(y=p.value)!=null?y:s.value}),c=t.cache?ge.get(t.cache):void 0,n=x(()=>B(h.value)),{current:V,pageLength:H,L:M,R:D,nextPage:me,prePage:he,goPage:be}=De(h,v,t.cache),T=I((ee=c==null?void 0:c.field)!=null?ee:g.value),j=I((te=c==null?void 0:c.order)!=null?te:a.value),E=()=>{t.cache&&ge.set(t.cache,{field:T.value,order:j.value})};E();const K=y=>{T.value=y,j.value=a.value,E()},Q=()=>{j.value==="desc"?j.value="asc":j.value="desc",E()},U=y=>{if(!y)return[];const P=[];for(const l of y)if(l.type===L&&Array.isArray(l.children))for(const r of l.children)r!==null&&typeof r=="object"&&!Array.isArray(r)&&P.push(r);else P.push(l);return P.filter(l=>l.type===Te)},W=U(o.columns?o.columns({}):[]),we=x(()=>(P=>{var l,r,f;if(B(T.value)){for(const m of W)if(((r=(l=m.props)==null?void 0:l.label)!=null?r:"")===T.value){const $=P.sort((f=m.props)==null?void 0:f.sort);return j.value==="desc"?$.reverse():$}return P}else return P})(v.value)),X=x(()=>we.value.slice(M.value,D.value)),Z=()=>i(z("c-table-page"),{current:V.value,first:0,last:H.value,pageSize:h.value,nextPage:me,prePage:he,goPage:be,pageView:C.value?3:5,isMobile:C.value}),xe=()=>{const y=()=>W.map(l=>{var F,ne,le,ae,se,re,oe,ie,ce;const r=B((F=l.props)==null?void 0:F.sort),f=r&&((le=(ne=l.props)==null?void 0:ne.label)!=null?le:"")===T.value,m={width:(ae=l.props)==null?void 0:ae.width,borderWidth:"0 0 2px 0"},A=((se=l.props)==null?void 0:se.align)==="center"||B((re=l.props)==null?void 0:re.center)&&((oe=l.props)==null?void 0:oe.center)!==!1?"justify-center":((ie=l.props)==null?void 0:ie.align)==="right"?"justify-end":"justify-start";return i("th",{style:m,class:["select-none","font-600","px-3","py-2","border-solid",f?"border-[#7a7a7a]":"border-[#dbdbdb]",r?"cursor-pointer":null,r?"hover:border-[#7a7a7a]":null]},i("div",{class:["flex","items-center",A],onClick:r?()=>{var ue,de;f?Q():K((de=(ue=l.props)==null?void 0:ue.label)!=null?de:"")}:void 0},[r?i(j.value==="desc"?z("icon-down"):z("icon-up"),{class:[!f&&"text-transparent"]}):"",i("span",{},(ce=l.props)==null?void 0:ce.label)]))}),P=l=>l.map((r,f)=>i("tr",{},o.columns&&U(o.columns({row:r,index:f+M.value}))));return i("div",{},[i("table",{class:["table","w-full","border-separate","table-auto","rounded"]},[i("thead",{},i("tr",{},y())),i("tbody",{},P(X.value))]),n.value&&Z()])},ye=()=>{const y=()=>{const l=W.map(r=>{var f,m,A;if(B((f=r.props)==null?void 0:f.sort)){const $=(A=(m=r.props)==null?void 0:m.label)!=null?A:"";return i("option",{value:$},[$])}else return null}).filter(r=>B(r));return l.length>0&&i("div",{class:["my-4","flex","justify-between"]},[i(z("c-select"),{class:["w-full","mr-2"],onChange(r){var m;const f=(m=r.target)==null?void 0:m.value;B(f)&&K(f)}},l),i(z("c-button"),{info:!0,onClick:Q},[j.value==="desc"?i(z("icon-down"),{}):i(z("icon-up"),{})])])},P=()=>X.value.map((l,r)=>{const f=U(o.columns&&o.columns({row:l,index:r+M.value,mobile:!0}));return i("div",{class:["box","p-0","my-4"]},f.map(m=>{var $,F;const A=($=m.props&&m.props["mobile-header-class"])!=null?$:[];return i("div",{class:["pl-3","border","flex","flex-shrink","justify-between","justify-items-stretch"]},[i("div",{class:["py-2","font-600","text-left","flex","items-center",...A]},(F=m.props)==null?void 0:F.label),i(m,{class:["block"]})])}))});return i("div",{class:["mobile-table"]},[y(),P(),n.value&&Z()])};return()=>C.value?ye():xe()}});export{rt as C,Te as a,at as b};
