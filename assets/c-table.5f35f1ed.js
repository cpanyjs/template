import{o as e,c as l,a as n,i as t,u as a,j as r,d as s,k as o,l as i,r as u,b as c,w as d,g as p,m as v,F as g,n as f,t as m,e as b,h as w,p as h,q as y}from"./index.b1e74543.js";const x={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},k=[n("path",{d:"M11 4h2v12l5.5-5.5l1.42 1.42L12 19.84l-7.92-7.92L5.5 10.5L11 16V4z",fill:"currentColor"},null,-1)];var C={name:"mdi-arrow-down",render:function(n,t){return e(),l("svg",x,k)}};const P={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},M=[n("path",{d:"M13 20h-2V8l-5.5 5.5l-1.42-1.42L12 4.16l7.92 7.92l-1.42 1.42L13 8v12z",fill:"currentColor"},null,-1)];var L={name:"mdi-arrow-up",render:function(n,t){return e(),l("svg",P,M)}};var S=s({name:"CTableColumn",props:{label:String,width:{type:[Number,String]},align:String,center:{type:Boolean,default:!1},sort:Function,mobileHeaderClass:{type:Array,default:[]}},setup(e,{slots:l}){const{align:n,center:t}=o(e),a=["px-3","py-2","center"===n.value||t.value?"text-center":"right"===n.value?"text-right":"text-left"];return()=>i("td",{class:a},l.default&&l.default(e))}});const j={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},_=[n("path",{d:"M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.42z",fill:"currentColor"},null,-1)];var z={name:"mdi-chevron-left",render:function(n,t){return e(),l("svg",j,_)}};const q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},A=[n("path",{d:"M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.42z",fill:"currentColor"},null,-1)];var N={name:"mdi-chevron-right",render:function(n,t){return e(),l("svg",q,A)}};const B={key:0,class:"mb-2 grid grid-cols-2 gap-2"},R={class:"flex justify-center"},F=n("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),V=n("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Y=n("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),T=n("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1);var W=s({props:{isMobile:{type:Boolean,required:!1},pageView:{type:Number,required:!1},current:{type:Number,required:!0},first:{type:Number,required:!0},last:{type:Number,required:!0},pageSize:{type:Number,required:!0},nextPage:{type:Function,required:!0},prePage:{type:Function,required:!0},goPage:{type:Function,required:!0}},setup(t){const s=t,{isMobile:i,pageView:w,current:h,first:y,last:x}=o(s),k=r((()=>{var e;return null!=(e=null==w?void 0:w.value)?e:5})),C=r((()=>{var e;return null!=(e=null==i?void 0:i.value)&&e}));return(r,s)=>{const o=u("c-button");return e(),l(g,null,[a(C)?(e(),l("div",B,[c(o,{padding:"p-2",onClick:t.prePage,disable:a(h)<=a(y)},{default:d((()=>[c(a(z))])),_:1},8,["onClick","disable"]),c(o,{padding:"p-2",onClick:t.nextPage,disable:a(h)+1>=a(x)},{default:d((()=>[c(a(N))])),_:1},8,["onClick","disable"])])):p("v-if",!0),n("div",R,[a(C)?p("v-if",!0):(e(),v(o,{key:0,padding:"p-2",onClick:t.prePage,disable:a(h)<=a(y)},{default:d((()=>[c(a(z))])),_:1},8,["onClick","disable"])),a(x)-a(y)<=a(k)?(e(!0),l(g,{key:1},f(a(x)-a(y),(l=>(e(),v(o,{key:l,class:"ml-2",info:l+a(y)===a(h)+1,onClick:e=>t.goPage(l+a(y)-1)},{default:d((()=>[n("span",null,m(l+a(y)),1)])),_:2},1032,["info","onClick"])))),128)):a(h)-a(y)<a(k)?(e(),l(g,{key:2},[(e(!0),l(g,null,f(a(k),(l=>(e(),v(o,{key:l,class:"ml-2",info:l+a(y)===a(h)+1,onClick:e=>t.goPage(l+a(y)-1)},{default:d((()=>[n("span",null,m(l+a(y)),1)])),_:2},1032,["info","onClick"])))),128)),F,c(o,{class:"ml-2",onClick:s[0]||(s[0]=e=>t.goPage(a(x)-1))},{default:d((()=>[b(m(a(x)),1)])),_:1})],64)):a(x)-a(h)<=a(k)?(e(),l(g,{key:3},[c(o,{class:"ml-2",onClick:s[1]||(s[1]=e=>t.goPage(a(y)))},{default:d((()=>[b(m(a(y)+1),1)])),_:1}),V,(e(!0),l(g,null,f(a(k),(l=>(e(),v(o,{key:l,class:"ml-2",info:a(x)-a(k)+l===a(h)+1,onClick:e=>t.goPage(a(x)-a(k)+l-1)},{default:d((()=>[n("span",null,m(a(x)-a(k)+l),1)])),_:2},1032,["info","onClick"])))),128))],64)):(e(),l(g,{key:4},[c(o,{class:"ml-2",onClick:s[2]||(s[2]=e=>t.goPage(a(y)))},{default:d((()=>[b(m(a(y)+1),1)])),_:1}),Y,(e(!0),l(g,null,f(a(k),(l=>(e(),v(o,{key:l,class:"ml-2",info:a(h)-Math.floor(a(k)/2)+l===a(h)+1,onClick:e=>t.goPage(a(h)-Math.floor(a(k)/2)+l-1)},{default:d((()=>[n("span",null,m(a(h)-Math.floor(a(k)/2)+l),1)])),_:2},1032,["info","onClick"])))),128)),T,c(o,{class:"ml-2",onClick:s[3]||(s[3]=e=>t.goPage(a(x)-1))},{default:d((()=>[b(m(a(x)),1)])),_:1})],64)),a(C)?p("v-if",!0):(e(),v(o,{key:5,padding:"p-2",class:"ml-2",onClick:t.nextPage,disable:a(h)+1>=a(x)},{default:d((()=>[c(a(N))])),_:1},8,["onClick","disable"]))])],64)}}});const E={},I={class:"select relative"},O={class:"pl-2 pr-8 py-2 cursor-pointer block w-full outline-none rounded border border-1 border-[#dbdbdb] appearance-none"};E.render=function(t,a){return e(),l("div",I,[n("select",O,[w(t.$slots,"default")])])};var D=s({name:"CTable",components:{IconDown:C,IconUp:L,CTablePage:W,CSelect:E},props:{data:{type:Array,default:[]},mobile:{type:Number,default:768},defaultSort:{type:String},defaultSortOrder:{type:String,default:"asc"},pageSize:{type:Number},mobilePageSize:{type:Number}},setup(e,{slots:l}){const{data:n,defaultSort:s,defaultSortOrder:c,mobile:d,pageSize:p,mobilePageSize:v}=o(e),{isMobile:f,clean:m}=function(e){const l=t(window.innerWidth),n=t(l.value<=a(e)),r=()=>{l.value=window.innerWidth,n.value=l.value<=a(e)};return window.addEventListener("resize",r,{passive:!0}),{width:l,isMobile:n,clean:()=>window.removeEventListener("resize",r)}}(d);h((()=>m()));const b=r((()=>{var e;return f.value&&null!=(e=v.value)?e:p.value})),w=r((()=>y(b.value))),{current:x,pageLength:k,L:C,R:P,nextPage:M,prePage:L,goPage:j}=function(e,l){const n=r((()=>a(l).length)),s=r((()=>{var l;return Math.max(1,null!=(l=a(e))?l:n.value)})),o=r((()=>Math.ceil(n.value/s.value))),i=t(0),u=r((()=>i.value*s.value)),c=r((()=>Math.min(n.value,u.value+s.value))),d=r((()=>i.value+1<o.value&&c.value<n.value)),p=r((()=>i.value>0&&u.value>0));return{current:i,pageLength:o,L:u,R:c,hasNextPage:d,nextPage:()=>{d.value&&(i.value+=1)},hasPrePage:p,prePage:()=>{p.value&&(i.value-=1)},goPage:e=>{const l=a(e);0<=l&&l<o.value&&(i.value=l)}}}(b,n),_=t(s.value),z=t(c.value),q=e=>{_.value=e,z.value=c.value},A=()=>{"desc"===z.value?z.value="asc":z.value="desc"},N=e=>{if(!e)return[];const l=[];for(const n of e)if(n.type===g&&Array.isArray(n.children))for(const e of n.children)null===e||"object"!=typeof e||Array.isArray(e)||l.push(e);else l.push(n);return l.filter((e=>e.type===S))},B=N(l.columns?l.columns({}):[]),R=r((()=>(e=>{var l,n,t;if(y(_.value)){for(const a of B){if((null!=(n=null==(l=a.props)?void 0:l.label)?n:"")===_.value){const l=e.sort(null==(t=a.props)?void 0:t.sort);return"desc"===z.value?l.reverse():l}}return e}return e})(n.value))),F=r((()=>R.value.slice(C.value,P.value))),V=()=>i(u("c-table-page"),{current:x.value,first:0,last:k.value,pageSize:b.value,nextPage:M,prePage:L,goPage:j,pageView:f.value?3:5,isMobile:f.value});return()=>{return f.value?i("div",{class:["mobile-table"]},[(()=>{const e=B.map((e=>{var l,n,t;if(y(null==(l=e.props)?void 0:l.sort)){const l=null!=(t=null==(n=e.props)?void 0:n.label)?t:"";return i("option",{value:l},[l])}return null})).filter((e=>y(e)));return e.length>0&&i("div",{class:["my-4","flex","justify-between"]},[i(u("c-select"),{class:["w-full","mr-2"],onChange(e){var l;const n=null==(l=e.target)?void 0:l.value;y(n)&&q(n)}},e),i(u("c-button"),{info:!0,onClick:A},["desc"===z.value?i(u("icon-down"),{}):i(u("icon-up"),{})])])})(),F.value.map(((e,n)=>{const t=N(l.columns&&l.columns({row:e,index:n+C.value,mobile:!0}));return i("div",{class:["box","p-0","my-4"]},t.map((e=>{var l,n;const t=null!=(l=e.props&&e.props["mobile-header-class"])?l:[];return i("div",{class:["pl-3","border","flex","flex-shrink","justify-between","justify-items-stretch"]},[i("div",{class:["py-2","font-600","text-left","flex","items-center",...t]},null==(n=e.props)?void 0:n.label),i(e,{class:["block"]})])})))})),w.value&&V()]):i("div",{},[i("table",{class:["table","w-full","border-separate","table-auto","rounded"]},[i("thead",{},i("tr",{},B.map((e=>{var l,n,t,a,r,s,o,c,d;const p=y(null==(l=e.props)?void 0:l.sort),v=p&&(null!=(t=null==(n=e.props)?void 0:n.label)?t:"")===_.value,g={width:null==(a=e.props)?void 0:a.width,borderWidth:"0 0 2px 0"},f="center"===(null==(r=e.props)?void 0:r.align)||y(null==(s=e.props)?void 0:s.center)&&!1!==(null==(o=e.props)?void 0:o.center)?"justify-center":"right"===(null==(c=e.props)?void 0:c.align)?"justify-end":"justify-start";return i("th",{style:g,class:["select-none","font-600","px-3","py-2","border-solid",v?"border-[#7a7a7a]":"border-[#dbdbdb]",p?"cursor-pointer":null,p?"hover:border-[#7a7a7a]":null]},i("div",{class:["flex","items-center",f],onClick:p?()=>{var l,n;v?A():q(null!=(n=null==(l=e.props)?void 0:l.label)?n:"")}:void 0},[p?i("desc"===z.value?u("icon-down"):u("icon-up"),{class:[!v&&"text-transparent"]}):"",i("span",{},null==(d=e.props)?void 0:d.label)]))})))),i("tbody",{},(e=F.value,e.map(((e,n)=>i("tr",{},l.columns&&N(l.columns({row:e,index:n+C.value})))))))]),w.value&&V()]);var e}}});export{S as C,E as _,D as a};
