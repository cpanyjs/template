import{o as d,c as b,a as w,i as T,u as e,j as y,k as ke,d as W,l as G,m as i,r as j,b as S,w as k,e as J,n as V,F as L,p as H,t as z,f as O,_ as Ce,h as _e,q as Pe,s as A}from"./index.490ced5d.js";const Me={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Se=w("path",{d:"M11 4h2v12l5.5-5.5l1.42 1.42L12 19.84l-7.92-7.92L5.5 10.5L11 16V4z",fill:"currentColor"},null,-1),$e=[Se];function Le(t,o){return d(),b("svg",Me,$e)}var Ne={name:"mdi-arrow-down",render:Le};const je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},ze=w("path",{d:"M13 20h-2V8l-5.5 5.5l-1.42-1.42L12 4.16l7.92 7.92l-1.42 1.42L13 8v12z",fill:"currentColor"},null,-1),Be=[ze];function Ae(t,o){return d(),b("svg",je,Be)}var qe={name:"mdi-arrow-up",render:Ae};function Ve(t){const o=T(window.innerWidth),f=T(o.value<=e(t)),g=()=>{o.value=window.innerWidth,f.value=o.value<=e(t)},r=()=>window.removeEventListener("resize",g);return window.addEventListener("resize",g,{passive:!0}),{width:o,isMobile:f,clean:r}}const pe=new Map;function Fe(t,o,f){var I;const g=y(()=>e(o).length),r=y(()=>{var M;return Math.max(1,(M=e(t))!=null?M:g.value)}),u=y(()=>Math.ceil(g.value/r.value)),a=T(f&&(I=pe.get(f))!=null?I:0),p=y(()=>a.value*r.value),C=y(()=>Math.min(g.value,p.value+r.value));ke(a,M=>{f&&pe.set(f,M)});const _=y(()=>a.value+1<u.value&&C.value<g.value),h=()=>{_.value&&(a.value+=1)},c=y(()=>a.value>0&&p.value>0);return{current:a,pageLength:u,L:p,R:C,hasNextPage:_,nextPage:h,hasPrePage:c,prePage:()=>{c.value&&(a.value-=1)},goPage:M=>{const F=e(M);0<=F&&F<u.value&&(a.value=F)}}}var Re=W({name:"CTableColumn",props:{label:String,width:{type:[Number,String]},align:String,center:{type:Boolean,default:!1},sort:Function,mobileHeaderClass:{type:Array,default:[]}},setup(t,{slots:o}){const{align:f,center:g}=G(t),r=["px-3","py-2",f.value==="center"||g.value?"text-center":f.value==="right"?"text-right":"text-left"];return()=>i("td",{class:r},o.default&&o.default(t))}});const De={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Te=w("path",{d:"M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.42z",fill:"currentColor"},null,-1),Ie=[Te];function He(t,o){return d(),b("svg",De,Ie)}var fe={name:"mdi-chevron-left",render:He};const Oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ye=w("path",{d:"M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.42z",fill:"currentColor"},null,-1),Ee=[Ye];function Ue(t,o){return d(),b("svg",Oe,Ee)}var ve={name:"mdi-chevron-right",render:Ue};const We={key:0,class:"mb-2 grid grid-cols-2 gap-2"},Ge={class:"flex justify-center"},Je=w("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Ke=w("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Qe=w("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Xe=w("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Ze=W({props:{isMobile:{type:Boolean,required:!1},pageView:{type:Number,required:!1},current:{type:Number,required:!0},first:{type:Number,required:!0},last:{type:Number,required:!0},pageSize:{type:Number,required:!0},nextPage:{type:Function,required:!0},prePage:{type:Function,required:!0},goPage:{type:Function,required:!0}},setup(t){const o=t,{isMobile:f,pageView:g,current:r,first:u,last:a}=G(o),p=y(()=>{var _;return(_=g==null?void 0:g.value)!=null?_:5}),C=y(()=>{var _;return(_=f==null?void 0:f.value)!=null?_:!1});return(_,h)=>{const c=j("c-button");return d(),b(L,null,[e(C)?(d(),b("div",We,[S(c,{padding:"p-2",onClick:t.prePage,disable:e(r)<=e(u)},{default:k(()=>[S(e(fe))]),_:1},8,["onClick","disable"]),S(c,{padding:"p-2",onClick:t.nextPage,disable:e(r)+1>=e(a)},{default:k(()=>[S(e(ve))]),_:1},8,["onClick","disable"])])):J("v-if",!0),w("div",Ge,[e(C)?J("v-if",!0):(d(),V(c,{key:0,padding:"p-2",onClick:t.prePage,disable:e(r)<=e(u)},{default:k(()=>[S(e(fe))]),_:1},8,["onClick","disable"])),e(a)-e(u)<=e(p)?(d(!0),b(L,{key:1},H(e(a)-e(u),n=>(d(),V(c,{key:n,class:"ml-2",info:n+e(u)===e(r)+1,onClick:q=>t.goPage(n+e(u)-1)},{default:k(()=>[w("span",null,z(n+e(u)),1)]),_:2},1032,["info","onClick"]))),128)):e(r)-e(u)<e(p)?(d(),b(L,{key:2},[(d(!0),b(L,null,H(e(p),n=>(d(),V(c,{key:n,class:"ml-2",info:n+e(u)===e(r)+1,onClick:q=>t.goPage(n+e(u)-1)},{default:k(()=>[w("span",null,z(n+e(u)),1)]),_:2},1032,["info","onClick"]))),128)),Je,S(c,{class:"ml-2",onClick:h[0]||(h[0]=n=>t.goPage(e(a)-1))},{default:k(()=>[O(z(e(a)),1)]),_:1})],64)):e(a)-e(r)<=e(p)?(d(),b(L,{key:3},[S(c,{class:"ml-2",onClick:h[1]||(h[1]=n=>t.goPage(e(u)))},{default:k(()=>[O(z(e(u)+1),1)]),_:1}),Ke,(d(!0),b(L,null,H(e(p),n=>(d(),V(c,{key:n,class:"ml-2",info:e(a)-e(p)+n===e(r)+1,onClick:q=>t.goPage(e(a)-e(p)+n-1)},{default:k(()=>[w("span",null,z(e(a)-e(p)+n),1)]),_:2},1032,["info","onClick"]))),128))],64)):(d(),b(L,{key:4},[S(c,{class:"ml-2",onClick:h[2]||(h[2]=n=>t.goPage(e(u)))},{default:k(()=>[O(z(e(u)+1),1)]),_:1}),Qe,(d(!0),b(L,null,H(e(p),n=>(d(),V(c,{key:n,class:"ml-2",info:e(r)-Math.floor(e(p)/2)+n===e(r)+1,onClick:q=>t.goPage(e(r)-Math.floor(e(p)/2)+n-1)},{default:k(()=>[w("span",null,z(e(r)-Math.floor(e(p)/2)+n),1)]),_:2},1032,["info","onClick"]))),128)),Xe,S(c,{class:"ml-2",onClick:h[3]||(h[3]=n=>t.goPage(e(a)-1))},{default:k(()=>[O(z(e(a)),1)]),_:1})],64)),e(C)?J("v-if",!0):(d(),V(c,{key:5,padding:"p-2",class:"ml-2",onClick:t.nextPage,disable:e(r)+1>=e(a)},{default:k(()=>[S(e(ve))]),_:1},8,["onClick","disable"]))])],64)}}}),et={},tt={class:"select relative"},nt={class:"pl-2 pr-8 py-2 cursor-pointer block w-full outline-none rounded border border-1 border-[#dbdbdb] appearance-none"};function lt(t,o){return d(),b("div",tt,[w("select",nt,[_e(t.$slots,"default")])])}var rt=Ce(et,[["render",lt]]);const ge=new Map;var st=W({name:"CTable",components:{IconDown:Ne,IconUp:qe,CTablePage:Ze,CSelect:rt},props:{cache:{type:String},data:{type:Array,default:[]},mobile:{type:Number,default:768},defaultSort:{type:String},defaultSortOrder:{type:String,default:"asc"},pageSize:{type:Number},mobilePageSize:{type:Number}},setup(t,{slots:o}){var ee,te;const{data:f,defaultSort:g,defaultSortOrder:r,mobile:u,pageSize:a,mobilePageSize:p}=G(t),{isMobile:C,clean:_}=Ve(u);Pe(()=>_());const h=y(()=>{var x;return C.value&&(x=p.value)!=null?x:a.value}),c=t.cache?ge.get(t.cache):void 0,n=y(()=>A(h.value)),{current:q,pageLength:I,L:M,R:F,nextPage:me,prePage:he,goPage:be}=Fe(h,f,t.cache),R=T((ee=c==null?void 0:c.field)!=null?ee:g.value),N=T((te=c==null?void 0:c.order)!=null?te:r.value),Y=()=>{t.cache&&ge.set(t.cache,{field:R.value,order:N.value})};Y();const K=x=>{R.value=x,N.value=r.value,Y()},Q=()=>{N.value==="desc"?N.value="asc":N.value="desc",Y()},E=x=>{if(!x)return[];const P=[];for(const l of x)if(l.type===L&&Array.isArray(l.children))for(const s of l.children)s!==null&&typeof s=="object"&&!Array.isArray(s)&&P.push(s);else P.push(l);return P.filter(l=>l.type===Re)},U=E(o.columns?o.columns({}):[]),we=y(()=>(P=>{var l,s,v;if(A(R.value)){for(const m of U)if(((s=(l=m.props)==null?void 0:l.label)!=null?s:"")===R.value){const $=P.sort((v=m.props)==null?void 0:v.sort);return N.value==="desc"?$.reverse():$}return P}else return P})(f.value)),X=y(()=>we.value.slice(M.value,F.value)),Z=()=>i(j("c-table-page"),{current:q.value,first:0,last:I.value,pageSize:h.value,nextPage:me,prePage:he,goPage:be,pageView:C.value?3:5,isMobile:C.value}),ye=()=>{const x=()=>U.map(l=>{var D,ne,le,re,ae,se,oe,ie,ce;const s=A((D=l.props)==null?void 0:D.sort),v=s&&((le=(ne=l.props)==null?void 0:ne.label)!=null?le:"")===R.value,m={width:(re=l.props)==null?void 0:re.width,borderWidth:"0 0 2px 0"},B=((ae=l.props)==null?void 0:ae.align)==="center"||A((se=l.props)==null?void 0:se.center)&&((oe=l.props)==null?void 0:oe.center)!==!1?"justify-center":((ie=l.props)==null?void 0:ie.align)==="right"?"justify-end":"justify-start";return i("th",{style:m,class:["select-none","font-600","px-3","py-2","border-solid",v?"border-[#7a7a7a]":"border-[#dbdbdb]",s?"cursor-pointer":null,s?"hover:border-[#7a7a7a]":null]},i("div",{class:["flex","items-center",B],onClick:s?()=>{var ue,de;v?Q():K((de=(ue=l.props)==null?void 0:ue.label)!=null?de:"")}:void 0},[s?i(N.value==="desc"?j("icon-down"):j("icon-up"),{class:[!v&&"text-transparent"]}):"",i("span",{},(ce=l.props)==null?void 0:ce.label)]))}),P=l=>l.map((s,v)=>i("tr",{},o.columns&&E(o.columns({row:s,index:v+M.value}))));return i("div",{},[i("table",{class:["table","w-full","border-separate","table-auto","rounded"]},[i("thead",{},i("tr",{},x())),i("tbody",{},P(X.value))]),n.value&&Z()])},xe=()=>{const x=()=>{const l=U.map(s=>{var v,m,B;if(A((v=s.props)==null?void 0:v.sort)){const $=(B=(m=s.props)==null?void 0:m.label)!=null?B:"";return i("option",{value:$},[$])}else return null}).filter(s=>A(s));return l.length>0&&i("div",{class:["my-4","flex","justify-between"]},[i(j("c-select"),{class:["w-full","mr-2"],onChange(s){var m;const v=(m=s.target)==null?void 0:m.value;A(v)&&K(v)}},l),i(j("c-button"),{info:!0,onClick:Q},[N.value==="desc"?i(j("icon-down"),{}):i(j("icon-up"),{})])])},P=()=>X.value.map((l,s)=>{const v=E(o.columns&&o.columns({row:l,index:s+M.value,mobile:!0}));return i("div",{class:["box","p-0","my-4"]},v.map(m=>{var $,D;const B=($=m.props&&m.props["mobile-header-class"])!=null?$:[];return i("div",{class:["pl-3","border","flex","flex-shrink","justify-between","justify-items-stretch"]},[i("div",{class:["py-2","font-600","text-left","flex","items-center",...B]},(D=m.props)==null?void 0:D.label),i(m,{class:["block"]})])}))});return i("div",{class:["mobile-table"]},[x(),P(),n.value&&Z()])};return()=>C.value?xe():ye()}});export{st as C,Re as a,rt as b};
