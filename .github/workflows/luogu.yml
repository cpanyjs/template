name: Fetch Luogu data

on:
  workflow_dispatch:

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup CPany
        uses: cpanyjs/setup-cpany@v0
      - name: Fetch luogu data
        run: cpany fetch --plugins luogu --log error
        env:
          CLIENT_ID: ${{ secrets.LUOGU_CLIENT_ID }}
          UID: ${{ secrets.LUOGU_UID }}
